{
  "markdown": "# Braintree-NetSuite Implementation Guide\n\n**Prepared for:** Acme Corporation\n**Generated:** 12/10/2025\n\n---\n\n## Welcome\n\nThis personalized implementation guide has been created based on your specific Braintree integration requirements. It contains only the sections relevant to your configuration, helping you focus on what matters most for your implementation.\n\n### Implementation Complexity: ⚠️ MODERATE\n\nModerate - Standard configuration with some additional features\n\n---\n\n## Your Configuration\n\n✓ **Same-Day Capture** - Transactions authorized and captured immediately\n✓ **ACH Processing** - Bank transfers (Network Check)\n✓ **Payment Methods:** Credit/Debit Cards, PayPal, Google Pay\n✓ **Processing Channels:** eCommerce, Payment Link\n✓ **Basic Fraud Protection** - AVS and CVV verification\n✓ **3D Secure 2.0** - SCA compliance for regulated regions\n\n---\n\n## Table of Contents\n\nThis guide includes 12 sections:\n\n1. [OVERVIEW OF THE BRAINTREE ECOSYSTEM](#section-1)\n2. [MAIN SUPPORT DOCUMENTS](#section-2)\n3. [SEPARATION OF DUTIES AND SUPPORT BOUNDARIES](#section-3)\n4. [TOKENIZATION AND RE-AUTHORIZATION](#section-4)\n5. [3D SECURE 2.0](#section-7)\n6. [EXTERNAL ECOMMERCE INTEGRATION](#section-8)\n7. [CREDIT CARD PROCESSING](#section-9)\n8. [ACH (AUTOMATED CLEARING HOUSE)](#section-10)\n9. [PAYPAL AND EXTERNAL CHECKOUT](#section-11)\n10. [DIGITAL WALLETS (GOOGLE PAY, APPLE PAY, VENMO)](#section-12)\n11. [RECONCILIATION AND REPORTING](#section-14)\n12. [FRAUD PROTECTION](#section-15)\n\n---\n\n## Implementation Guide\n\n<a id=\"section-1\"></a>\n\n## 1. OVERVIEW OF THE BRAINTREE ECOSYSTEM\n\n**Tags**: [general reference]\n\n### What We Support\n\nThe Braintree-NetSuite integration consists of two primary SuiteApps:\n\n1. **SuitePayments** - Payment processing, authorization, capture, and refund operations\n2. **Reporting & Reconciliation** - Transaction reconciliation and fund disbursement tracking\n\n### Integration Scope\n\n- Real-time payment authorization, capture, and reauthorization\n- Partial and over-capture transactions\n- Tokenization and vaulting of payment methods\n- Multiple payment method support (credit cards, ACH, PayPal, Google Pay, Apple Pay, Venmo)\n- Multi-subsidiary and multi-currency processing\n- Fraud protection (basic and advanced)\n- Automated reconciliation via Disbursement Fee Reports (DFR)\n\n---\n\n<a id=\"section-2\"></a>\n\n## 2. MAIN SUPPORT DOCUMENTS\n\n**Tags**: [general reference]\n\n### Admin and End User Guides\n\nAll documentation is version-controlled and accessible through the Payment Processing Profile in NetSuite:\n\n| Document | Purpose | Location |\n|---|---|---|\n| **SuitePayments Admin Guide (V.42, Release 1.3.51)** | Setup, configuration, payment methods, fraud management | Braintree Configuration > Payment Processing Profile > Admin End User Guide link |\n| **Reporting & Reconciliation Admin Guide (V2.9, Release 2025.1.0.29)** | SFTP setup, reconciliation configuration, deposit creation | Braintree Reconciliation > Configuration > Admin and End User Guide link |\n| **NetSuite Training Slides** | High-level sales and technical overview | Internal training repository |\n| **NetSuite Basics** | General NetSuite platform navigation and functionality | Oracle NetSuite Help Center |\n\n### Key Reference Materials\n\n- Braintree Control Panel documentation (available via Braintree support)\n- PayPal Developer Portal (for alternate payment methods)\n- NetSuite SuiteAnswers and Help Center\n- Integration-specific mapping documentation (provided during setup)\n\n**Note:** Request the latest documentation versions from ELIM Solutions or check the SuiteApp marketplace for the most current releases.\n\n---\n\n<a id=\"section-3\"></a>\n\n## 3. SEPARATION OF DUTIES AND SUPPORT BOUNDARIES\n\n**Tags**: [general reference]\n\n### Where We Support (ELIM Solutions / Braintree Integration Team)\n\n#### SuiteApp Installation & Configuration\n- Payment Processing Profile setup and credential management\n- Payment method configuration (card brands, tokenization, fraud settings)\n- Webhook and postback URL configuration\n- Theme record and UI customization\n- Reporting and reconciliation SFTP setup and DFR configuration\n- Script scheduling and deployment\n\n#### Payment Processing Workflows\n- Authorization, capture, refund, void operations\n- Reauthorization logic and expiration handling\n- Tokenization and token retrieval workflows\n- External ecommerce transaction recording\n- Payment status and event tracking\n\n#### Reconciliation & Reporting\n- DFR import configuration and troubleshooting\n- Deposit record creation and linking issues\n- Transaction matching and discrepancy resolution\n- Account allocation and manual transaction linking\n\n#### Advanced Features\n- Fraud Protection Advanced setup and decision handling\n- 3D Secure 2.0 configuration\n- L2/L3 data processing for specialized merchants\n- Account Updater for expired card renewal\n- Dynamic descriptors and custom field mapping\n\n### Where Merchant Supports (Merchant / Customer Success)\n\n#### Braintree Account Management\n- Merchant account setup and sandbox provisioning\n- Braintree credentials and API key generation\n- Merchant Account ID creation for subsidiaries and currencies\n- Settlement account configuration in Braintree Control Panel\n\n#### NetSuite Configuration\n- Enable Features and Accounting Preferences\n- Subsidiary and legal entity structure setup\n- Bank account and chart of accounts configuration\n- User roles and permissions for payment processing\n\n#### Business Process Design\n- Payment workflow decisions (authorization vs. sale, capture timing)\n- Refund policies and procedures\n- Reconciliation schedule and responsibility assignment\n\n#### Operational Support\n- End-user training and support\n- Daily transaction monitoring and issue escalation\n- Chargeback and dispute handling\n- Invoice and payment reminder processes\n\n---\n\n<a id=\"section-4\"></a>\n\n## 4. TOKENIZATION AND RE-AUTHORIZATION\n\n*Relevant to: credit_card, paypal, tokenization, reauthorization, feature, moderate*\n\n**Tags**: `credit_card`, `paypal`, `tokenization`, `reauthorization`, `feature`, `moderate`\n\n### Overview\n\nTokenization stores payment card details securely in Braintree vault. Tokens remain valid until card expiration or Account Updater renewal.\n\nRe-authorization is required when:\n- Authorization expires (typically 7 days)\n- Amount changes\n- Order needs to be rebilled\n\n### Configuration\n\n**Setup Location**: Braintree Configuration > Payment Processing Profile > Tokenization section\n\n**Required Fields**:\n- **Replace Payment Card by Token**: Set to `true`\n- **Payment Card Token Payment Method**: Select or create payment method (type: Payment Card Token)\n- **General Token Payment Method**: Select or create (for PayPal/alternate methods)\n\n**Re-auth Button Display Options**:\n- `No` - Never show re-auth button\n- `Based on days before expiry` - Show when approaching authorization expiration\n- `Always` - Always show re-auth button\n\n**Days Prior to Expiry for ReAuth button**: Specify number of days (e.g., 3 days before expiry)\n\n### Payment Processing Steps\n\n1. Initial transaction processes with credit card\n2. Card tokenized and stored in Braintree vault\n3. Token stored on customer record in NetSuite (under Custom tab)\n4. Token reused for future transactions\n5. Account Updater automatically refreshes expired cards\n6. Re-auth initiated when auth expires or amount changes\n\n### Common Issues and Resolution\n\n| Issue | Cause | Resolution |\n|---|---|---|\n| Token expiration not detected | Auth events not monitored | Enable Account Updater; regularly review Auth Event records |\n| Re-auth fails | Card no longer in vault | Verify token exists in Braintree; check Account Updater status |\n| Duplicate tokens created | Poor token management during import | Implement token deduplication logic; verify import mapping |\n| Expired cards still being used | Account Updater not enabled | Enable Account Updater on Payment Processing Profile |\n\n### Account Updater Configuration\n\n**Purpose**: Automatically refresh expired cards before reauth fails\n\n**Setup**:\n1. Navigate to Braintree Configuration > Payment Processing Profile\n2. Scroll to Account Updater section\n3. Ensure Account Updater is enabled\n4. Review Account Update Summary Report for token status\n\n**Monitoring**:\n- Check Account Update Summary Report for refresh status\n- Watch for \"Invalid\" token status requiring manual action\n- Set up email alerts for update failures\n\n---\n\n<a id=\"section-7\"></a>\n\n## 5. 3D SECURE 2.0\n\n*Relevant to: credit_card, 3ds_2, feature, moderate, payment_link, payment_request_link*\n\n**Tags**: `credit_card`, `3ds_2`, `feature`, `moderate`, `payment_link`, `payment_request_link`\n\n### Overview\n\nThree-Domain Secure 2.0 is an authentication protocol for card-not-present transactions. Can trigger customer challenge or seamless authentication depending on issuer rules.\n\n### When 3DS 2.0 is Used\n\n- Regulatory requirement (e.g., PSD2 in Europe)\n- High-risk transaction profiles\n- Merchant preference for additional security\n- Payment Link and Payment Request Link transactions\n- Payment Card and Google Pay checkout flows\n\n### Configuration\n\n**Enable on Payment Processing Profile**:\n1. Navigate to Braintree Configuration > Payment Processing Profile\n2. Scroll to Primary section\n3. Check \"Payer Authentication\" checkbox\n4. Save\n\n**Add Authentication to Gateway Request Types**:\n1. Scroll down to Gateway Request Types section\n2. Ensure \"Authentication\" is listed\n3. If not present, manually add it\n4. Save\n\n**Enable on Braintree Control Panel**:\n1. Login to Braintree\n2. Navigate to Account Settings > Processing\n3. Verify 3DS 2.0 enabled\n4. Save\n\n### Billing Address Configuration (Critical as of v1.3.50+)\n\n**Importance**: Incorrect billing address format causes authentication challenge failures\n\n**Configuration Options on Payment Processing Profile**:\n- `Use Payment Card For Billing Address By Default`: Enabled = use card's billing address; Disabled = use transaction billing address\n\n**Best Practice**:\n- Enable for payment card transactions\n- Ensure card billing address matches NetSuite customer record\n- Test with multiple card issuers before production\n\n### Customer Experience\n\nWhen transaction triggers 3DS 2.0:\n1. Customer redirected to issuing bank's authentication page\n2. Bank challenges customer (password, OTP, biometric, etc.)\n3. Upon successful auth, transaction proceeds\n4. If auth fails, transaction declined\n\n### Common Issues and Resolution\n\n| Issue | Cause | Resolution |\n|---|---|---|\n| 3DS challenge fails | Incorrect billing address format | Verify address format matches card issuer; enable \"Use Payment Card For Billing Address\" |\n| Authentication gateway request type not found | Not configured on Payment Processing Profile | Add \"Authentication\" to Gateway Request Types section |\n| Timezone/locale affecting challenge UI | Regional configuration issue | Contact Braintree support for locale settings |\n| Merchant not configured on Braintree | 3DS 2.0 not activated | Enable 3DS 2.0 on Braintree Control Panel |\n\n---\n\n<a id=\"section-8\"></a>\n\n## 6. EXTERNAL ECOMMERCE INTEGRATION\n\n*Relevant to: ecommerce, external_checkout, integration, complex*\n\n**Tags**: `ecommerce`, `external_checkout`, `integration`, `complex`\n\n### Overview\n\nSuiteApp designed to work with external platforms (Shopify, Magento, BigCommerce, custom integrations).\n\nTransactions can be:\n1. **Recorded** with handling mode \"Record External Event\"\n2. **Imported** with data mapping\n3. **Created directly** via API or integration\n\n### Tokenization for External Platforms\n\n**Important**: Tokenization must occur on external platform for vaulting in NetSuite\n\n**Flow**:\n1. Customer enters payment card on external checkout\n2. External platform tokenizes card (via Braintree hosted fields or own tokenizer)\n3. External platform stores token\n4. External platform processes auth/capture with token\n5. External platform sends PN Ref to NetSuite via integration\n6. NetSuite records transaction with PN Ref\n\n**For vaulting in NetSuite**:\n- Enable \"Enable Retrieve Vaulted Token\" checkbox on Sales Order\n- System fetches token from Braintree using PN Ref\n- Token stored on NetSuite customer record\n\n### PN Ref (Legacy ID) Critical for Linking\n\n**Definition**: Unique transaction identifier from Braintree\n\n**Importance**: PN Ref is the key link between external transaction and NetSuite record\n\n**Common Issues**:\n- PN Ref not passed in integration mapping → Transactions orphaned, duplicates created\n- PN Ref format incorrect → Matching fails\n- PN Ref not unique → Multiple transactions linked incorrectly\n\n**Resolution**:\n1. Establish clear PN Ref mapping requirements before integration build\n2. Validate PN Ref field in integration data mapping\n3. Test with small transaction volume first (10-20 transactions)\n4. Reconcile before scaling to production volume\n\n### Recording External Events\n\n**When to Use**: Transaction already authorized/captured on external platform; need to record in NetSuite\n\n**Configuration**:\n1. Create Sales Order in NetSuite\n2. Set Payment Option to external platform payment method\n3. Set Handling Mode to \"Record External Event\"\n4. Enter PN Ref (transaction ID from external platform)\n5. Enter Auth Code (if available)\n6. Set Payment Operation to Authorization or Sale\n7. Save\n\n**Result**: Payment Event record created showing transaction recorded (not processed in real-time)\n\n### Token Retrieval for Externally Authorized Transactions\n\n**When to Use**: Customer authorized on external platform; want to retrieve token for future NetSuite transactions\n\n**Configuration**:\n1. On Sales Order, check \"Enable Retrieve Vaulted Token\" checkbox\n2. Set Handling Mode to \"Record External Event\"\n3. Enter PN Ref from external transaction\n4. Save\n\n**Result**: Token fetched from Braintree and stored on customer record\n\n### Common Issues and Resolution\n\n| Issue | Cause | Resolution |\n|---|---|---|\n| PN Ref mapping incorrect | Integration mapping error | Verify mapping with external platform team; validate sample transactions |\n| External authorization not yet settled | Timing issue | Wait 24-48 hours for settlement; retry import/recording |\n| Payment method doesn't exist in NetSuite | External platform not configured | Create external platform payment method in NetSuite first |\n| Amount mismatches | Calculation error in integration | Verify amount field mapping; test with manual transaction |\n| Duplicate transactions created | PN Ref collision or multiple import attempts | Implement deduplication logic; check for duplicate integration runs |\n| Token retrieval fails | Vaulting not enabled on external platform | Verify external platform has vaulting enabled; check token exists in Braintree |\n\n---\n\n<a id=\"section-9\"></a>\n\n## 7. CREDIT CARD PROCESSING\n\n*Relevant to: credit_card, operation, payment_link, payment_request_link, moto, suitcommerce*\n\n**Tags**: `credit_card`, `operation`, `payment_link`, `payment_request_link`, `moto`, `suitcommerce`\n\n### Authorization Workflow\n\n**Use Case**: Hold funds without capturing immediately (e.g., before shipment)\n\n**NetSuite Steps**:\n1. Create Sales Order\n2. Under Billing tab: Set Payment Option to credit card\n3. Set Payment Operation to \"Authorization\"\n4. Set Payment Processing Profile to Braintree\n5. Set Handling Mode to \"Process\"\n6. Optional: Set Authorization Amount if different from total\n7. Click Save\n\n**Result**: \n- Authorization created in Braintree\n- Payment Event record shows \"Authorization\" with status\n- Funds held for 7 days (typically)\n\n**Next Step**: Capture authorization when ready to charge\n\n### Capture Authorization Workflow\n\n**Use Case**: Capture previously authorized funds\n\n**NetSuite Steps**:\n1. Open Sales Order with existing Authorization\n2. Click \"Fulfill\" or \"Bill\" to trigger capture\n3. Verify Payment Operation shows \"Capture Authorization\"\n4. Click Save\n\n**Result**:\n- Capture request sent to Braintree\n- Payment Event shows \"Capture Authorization\" status\n- Funds pulled from customer account\n\n### Sale Workflow (Auth + Capture)\n\n**Use Case**: Authorize and capture in single operation (e.g., e-commerce checkout, Payment Link)\n\n**NetSuite Steps**:\n1. Create Cash Sale or Customer Deposit\n2. Under Billing tab: Set Payment Option to credit card\n3. Set Payment Operation to \"Sale\"\n4. Set Payment Processing Profile to Braintree\n5. Set Handling Mode to \"Process\"\n6. Click Save\n\n**Result**:\n- Authorization created and immediately captured\n- Funds pulled from customer account\n- Single Payment Event record shows \"Sale\"\n\n### Payment Link (Invoice-Based Sale)\n\n**Use Case**: Customer pays invoice online via secure link\n\n**Setup**:\n1. Navigate to Setup > Company > Enable Features\n2. Enable \"Payment Link\" under Transactions tab\n3. Navigate to Commerce > Payment Link\n4. Configure: Domain Prefix, Payment Methods, Company Logo, Email Templates\n5. Save\n\n**Workflow**:\n1. Create Invoice\n2. Under Billing tab: Set Payment to \"Payment Link\"\n3. Click Save\n4. Share Payment Link URL with customer\n5. Customer clicks link, selects payment method, enters card details\n6. Transaction processed securely via Braintree\n7. Customer Payment record created automatically\n8. Email confirmation sent\n\n**Key Configuration**:\n- **Domain Prefix**: Unique identifier for your Payment Link URL\n- **Payment Methods**: Select which payment types customer can use\n- **Allow Partial Payments**: Enable if customer can pay invoice amount partially\n- **Email Templates**: Customize acceptance/rejection messages\n\n### Refund Workflow\n\n**Important**: Braintree supports referenced refunds only (must reference original transaction)\n\n**NetSuite Steps**:\n1. Open Cash Sale with successful Capture or Sale\n2. Click \"Refund\" button (appears if transaction settled)\n3. Verify Payment Operation shows \"Refund\"\n4. Review refund amount (may partial)\n5. Click Save\n\n**Result**:\n- Refund request sent to Braintree\n- Funds returned to customer account (1-3 business days)\n- Payment Event shows \"Refund\" status\n\n**Timing Note**: Braintree may error if transaction not yet settled (typically 24 hours after capture)\n\n### Void Authorization Workflow\n\n**Use Case**: Cancel authorization before capture (e.g., order cancelled before shipment)\n\n**NetSuite Steps**:\n1. Open Sales Order with Authorization\n2. Click \"Close Order\"\n3. Confirm void\n\n**Result**:\n- Authorization voided in Braintree\n- Funds released immediately\n- Payment Event shows \"Void Authorization\"\n\n---\n\n<a id=\"section-10\"></a>\n\n## 8. ACH (AUTOMATED CLEARING HOUSE)\n\n*Relevant to: ach, operation, payment_link, suitcommerce, moderate*\n\n**Tags**: `ach`, `operation`, `payment_link`, `suitcommerce`, `moderate`\n\n### Overview\n\nACH processes bank-to-bank transfers. Typically settles in 1-2 business days (not immediate like credit cards).\n\n### Configuration\n\n**Enable on Braintree**:\n1. Login to Braintree Control Panel\n2. Navigate to Account Settings > Processing\n3. Verify ACH enabled\n4. Confirm Merchant Account supports ACH\n\n**Enable on NetSuite**:\n1. Navigate to Braintree Configuration > Payment Methods > New\n2. Set Name: \"ACH\"\n3. Set Type: \"ACH\"\n4. Set Associated Payment Processing Profile: Your Braintree profile\n5. Set Account: Expense account for ACH fees (if applicable)\n6. Save\n\n2. Add to Payment Processing Profile\n   - Navigate to Braintree Configuration > Payment Processing Profile\n   - Scroll to Payment Information section\n   - Ensure ACH appears in supported payment methods\n   - Save\n\n### Usage Scenarios\n\n| Scenario | Payment Operation | Processing |\n|---|---|---|\n| Sales Order payment | Sale | Auth and immediate clearing house debit |\n| Invoice payment via Payment Link | Sale | Customer initiates debit from Payment Link |\n| Customer Payment (manual entry) | Sale | Back-office operator enters bank details |\n| SuiteCommerce MyAccount | Sale | Customer self-service payment |\n\n### Real-Time ACH Status (Optional)\n\n**Purpose**: Receive webhook notifications when ACH transaction status changes\n\n**Configuration**:\n1. Navigate to Braintree Configuration > Payment Processing Profile\n2. Check \"Enable Real time ACH status\" checkbox\n3. Save\n\n**Result**: Webhook sent to NetSuite when ACH settles or fails\n\n### Common Issues and Resolution\n\n| Issue | Cause | Resolution |\n|---|---|---|\n| ACH not appearing in payment methods | Not enabled on Braintree or Payment Method not created | Enable on Control Panel; create ACH Payment Method in NetSuite |\n| Transaction fails with \"not supported\" | Merchant Account doesn't support ACH | Contact Braintree to enable ACH on Merchant Account |\n| Settlement delayed | Standard 1-2 business day ACH cycle | Inform customer of standard timeline; provide transaction reference |\n| ACH marked failed but no status update | Real-time ACH status not enabled | Enable webhook or manually check transaction status in Braintree |\n\n---\n\n<a id=\"section-11\"></a>\n\n## 9. PAYPAL AND EXTERNAL CHECKOUT\n\n*Relevant to: paypal, external_checkout, digital_wallet, payment_link, payment_request_link, suitcommerce*\n\n**Tags**: `paypal`, `external_checkout`, `digital_wallet`, `payment_link`, `payment_request_link`, `suitcommerce`\n\n### PayPal Setup\n\n**Prerequisites**:\n1. PayPal Developer Account created (https://developer.paypal.com)\n2. Braintree connected to PayPal account\n3. NetSuite credentials configured\n\n**Configuration Steps**:\n\n1. **Create PayPal App**\n   - Login to PayPal Developer Portal\n   - Navigate to Apps & Credentials\n   - Create new Merchant App\n   - Copy: Client ID, Secret\n\n2. **Connect PayPal to Braintree**\n   - Login to Braintree Control Panel\n   - Navigate to Processing > PayPal > Options\n   - Paste PayPal Email, Client ID, Secret\n   - Save\n\n3. **Setup Payment Method in NetSuite**\n   - Navigate to Braintree Configuration > Payment Methods > New\n   - Set Name: \"PayPal\"\n   - Set Type: \"External Checkout\"\n   - Set Associated Payment Processing Profile: Your profile\n   - Save\n\n4. **Add to Payment Processing Profile**\n   - Navigate to Braintree Configuration > Payment Processing Profile\n   - Under Allowed Alternate Payments: Select \"PayPal\"\n   - Save\n\n### PayPal Checkout Flow\n\n**Returning Payer Experience**: Reduces friction for repeat customers\n\n**Buy Now Pay Later (BNPL)**: PayPal financing option available to eligible customers\n\n**Configuration**:\n- Enable \"PayPal Checkout Returning Payer\" in Allowed Alternate Payments\n- Enable \"PayPal Buy Now Pay Later\" in Allowed Alternate Payments\n\n### Usage Scenarios\n\n| Scenario | Location | Result |\n|---|---|---|\n| Payment Link (invoice) | Customer clicks Payment Link | Redirect to PayPal | Select PayPal or BNPL |\n| Braintree Payment Request Link | Sales Order payment request | Redirect to Braintree PRL hosted page |\n| SuiteCommerce Advanced | Checkout page | PayPal button embedded in checkout |\n| External Checkout | Any checkout requiring alternate payment | Redirect to Braintree payment page |\n\n### PayPal Tokenization (General Tokens)\n\n**Important**: PayPal uses General Tokens (not Payment Card Tokens)\n\n**Configuration**:\n1. Navigate to Braintree Configuration > Payment Processing Profile\n2. Under Tokenization section: Set General Token Payment Method to PayPal General Token\n3. Check \"Replace Payment Card by Token\" if vaulting desired\n4. Save\n\n**Result**: PayPal account stored as General Token on customer record for future use\n\n### Common Issues and Resolution\n\n| Issue | Cause | Resolution |\n|---|---|---|\n| PayPal not showing on Payment Link | Not in Allowed Alternate Payments | Add PayPal to Allowed Alternate Payments on PPP |\n| Redirect fails | Redirect URL not configured | Verify Braintree Control Panel redirect settings |\n| Token not created | General Token payment method not configured | Create PayPal General Token payment method |\n| BNPL not showing | Not enabled in Allowed Alternate Payments | Enable PayPal Buy Now Pay Later |\n\n---\n\n<a id=\"section-12\"></a>\n\n## 10. DIGITAL WALLETS (GOOGLE PAY, APPLE PAY, VENMO)\n\n*Relevant to: digital_wallet, external_checkout, payment_link, payment_request_link, suitcommerce*\n\n**Tags**: `digital_wallet`, `external_checkout`, `payment_link`, `payment_request_link`, `suitcommerce`\n\n### Google Pay\n\n**Configuration**:\n\n1. **Get Google Merchant ID**\n   - Sign in to Google Merchant Center\n   - Navigate to Account Settings\n   - Copy Merchant ID\n\n2. **Enable on Braintree Control Panel**\n   - Login to Braintree\n   - Navigate to Account Settings > Payment Method > Google Pay\n   - Enable Google Pay toggle\n   - Save\n\n3. **Add Google Merchant ID to NetSuite**\n   - Navigate to Braintree Configuration > Payment Processing Profile\n   - Scroll to Digital Wallet Configuration section\n   - Paste Google Merchant ID in \"Google Merchant ID\" field\n   - Save\n\n4. **Add to Allowed Alternate Payments**\n   - Under Allowed Alternate Payments: Select \"Google Pay\"\n   - Save\n\n**Result**: Google Pay button appears on Payment Link, Payment Request Link, and SuiteCommerce checkout\n\n### Apple Pay\n\n**Configuration** (More Complex):\n\n1. **Enable on Braintree Control Panel**\n   - Login to Braintree\n   - Navigate to Account Settings > Payment Method > Apple Pay\n   - Enable Apple Pay toggle\n\n2. **Add Website Domains**\n   - Click \"Options\" > \"Add Website Domain\"\n   - For SuiteCommerce: Copy SCA primary domain from SCA configuration\n   - For Payment Link/PRL: Generate test transaction, copy domain from URL until .com\n   - Add domain and agree to terms\n   - Click \"Create a Certificate Signing Request\"\n   - Download CSR file (save for later)\n\n3. **Configure on Apple Developer Account** (Requires macOS)\n   - Sign in to Apple Developer Account (Team Agent or Admin role)\n   - Navigate to Certificates, IDs & Profiles\n   - Create Merchant ID\n   - Create Apple Pay Payment Processing Certificate (upload CSR)\n   - Create Apple Pay Merchant Identity Certificate\n   - Download certificates\n\n4. **Add Certificates to NetSuite**\n   - Navigate to Setup > Company > Keys\n   - Create new Key record\n   - Upload Apple certificates\n\n5. **Add to Payment Processing Profile**\n   - Navigate to Braintree Configuration > Payment Processing Profile\n   - Under Digital Wallet Configuration: Ensure Apple Pay payment method selected\n   - Under Allowed Alternate Payments: Select \"Apple Pay\"\n   - Save\n\n**Result**: Apple Pay button appears on supported transactions\n\n### Venmo\n\n**Important**: Requires PayPal qualification and business profile setup\n\n**Configuration**:\n\n1. **Get Business Profile from Braintree**\n   - Contact PayPal to enable Venmo\n   - Create Business Profile in Braintree Control Panel\n   - Navigate to Account Settings > Payment Method > Venmo > Options > Add New Profile\n\n2. **Enable on Payment Processing Profile**\n   - Navigate to Braintree Configuration > Payment Processing Profile\n   - Under Digital Wallet Configuration: Select Venmo payment method\n   - Under Allowed Alternate Payments: Select \"Venmo\"\n   - Save\n\n**Result**: Venmo option appears on Payment Link, Payment Request Link, and SuiteCommerce\n\n### Vaulting Digital Wallets\n\nAll digital wallets can be tokenized and stored as General Tokens\n\n**Configuration**:\n1. Ensure General Token payment method created\n2. Check \"Vault Alternate Payment\" on Payment Processing Profile\n3. Enable Theme Record vaulting option\n4. Save\n\n**Result**: \"Save this payment method\" checkbox appears for customers; tokens stored for future use\n\n### Common Issues and Resolution\n\n| Issue | Cause | Resolution |\n|---|---|---|\n| Google Pay button not showing | Google Merchant ID not set | Add Google Merchant ID to PPP |\n| Apple Pay certificate errors | macOS not used for setup | Use macOS for certificate creation; ensure Team Agent role |\n| Venmo not enabled | PayPal qualification not obtained | Contact PayPal to enable Venmo |\n| Domain verification failed | Incorrect domain added | Verify domain matches exact URL (until .com); re-verify on Apple account |\n\n---\n\n<a id=\"section-14\"></a>\n\n## 11. RECONCILIATION AND REPORTING\n\n*Relevant to: reconciliation, moderate, complex*\n\n**Tags**: `reconciliation`, `moderate`, `complex`\n\n### Overview\n\nReconciliation SuiteApp automates matching bank deposits to NetSuite transactions.\n\n**Flow**:\n1. Braintree generates Disbursement Fee Report (DFR) every 2 calendar days\n2. DFR uploaded to Braintree SFTP server\n3. NetSuite scheduled script pulls DFR from SFTP\n4. System creates Braintree Reconciliation Summary records\n5. Individual transactions linked via Legacy ID (PN Ref)\n6. NetSuite deposit records created automatically or manually\n7. Reconciliation Summary marked \"Ready for Reconciliation\"\n\n### Configuration Areas\n\n**SFTP Connection**:\n- SSH key generation (3072-bit RSA)\n- Host key retrieval\n- Private key upload to NetSuite\n- SFTP start date configuration\n\n**DFR Configuration**:\n- Merchant Account IDs mapped to subsidiaries\n- Settlement types (Net or Gross)\n- Deposit bank accounts\n- Fee accounts for processing charges\n\n**Script Deployment**:\n- BT Import DFR file from SFTP server scheduled script\n- Frequency (typically daily)\n- Error notification recipients\n\n**File Cabinet**:\n- Create folder for storing downloaded DFR files\n- Set appropriate access restrictions\n\n### Reconciliation Summary Record\n\n**Contains**:\n- Disbursement details (amount, date, settlement type)\n- Associated transactions (sales, refunds, disputes, fees)\n- Generated deposit records (linked)\n- Status (Pending, Transactions Identified, Pending Resolution, Error in Deposits, Ready for Reconciliation)\n\n**Common Statuses**:\n- **Pending**: Reconciliation Summary still processing\n- **Transactions Identified**: All transactions found but no deposit created\n- **Pending Resolution**: Manual action needed (linking or allocation)\n- **Error in Deposits**: Issue creating deposit record\n- **Ready for Reconciliation**: Deposit created; ready to match against bank statement\n\n### Common Issues and Resolution\n\n| Issue | Cause | Resolution |\n|---|---|---|\n| SFTP Connection Test Unsuccessful | Invalid credentials, SSH key error | Verify SSH key ID; confirm public key shared with Braintree; test host key format |\n| Transactions Not Found | Legacy ID mismatch, transaction not settled | Verify transaction imported; check 2-day settlement timing |\n| Amount Mismatch | Partial captures, fees, currency | Review Braintree Reconciliation Transaction details; manually link or allocate |\n| Duplicate Transactions | Multiple NetSuite records for same Braintree transaction | Use \"Link a Transaction\" action; manually select correct transaction |\n| Error in Deposits | Clearing account not set, subsidiary/bank mismatch | Configure DFR with correct clearing account and bank account |\n\n### Monitoring Reconciliation\n\n**Check Daily**:\n- Reconciliation Summary Dashboard for new disbursements\n- Status of recent reconciliations\n- Error logs for failed transactions\n\n**Weekly**:\n- Month-to-Date and Year-to-Date Transaction/Fee Reports\n- Compare to bank deposits\n- Investigate discrepancies\n\n**Monthly**:\n- Full reconciliation against bank statement\n- Address any pending or error status summaries\n\n---\n\n<a id=\"section-15\"></a>\n\n## 12. FRAUD PROTECTION\n\n*Relevant to: fraud_protection, fraud_advanced, feature*\n\n**Tags**: `fraud_protection`, `fraud_advanced`, `feature`\n\n### Basic Fraud Management (AVS/CVV)\n\n**Configuration**:\n\n1. **Enable on Braintree Control Panel**\n   - Login to Braintree\n   - Navigate to Fraud Management\n   - Configure AVS rules (Address Verification System)\n   - Configure CVV rules (Card Verification Value)\n   - Save\n\n2. **Configure on Payment Processing Profile**\n   - Navigate to Braintree Configuration > Payment Processing Profile\n   - Under Skip Basic Fraud section:\n     - Skip Basic Fraud For Back Office Transaction: Set to desired option\n     - Skip Basic Fraud For Payment Link: Set to desired option\n     - Skip Basic Fraud For SCA: Set to desired option\n   - Save\n\n**AVS/CVV Checks**:\n- **AVS**: Verifies billing address matches card issuer's records\n- **CVV**: Verifies 3/4-digit security code on back of card\n\n**Result**: Transactions flagged or declined based on AVS/CVV mismatch\n\n### Fraud Protection Advanced\n\n**Configuration** (More Complex):\n\n1. **Enable on Braintree Control Panel**\n   - Login to Braintree\n   - Navigate to Fraud Management\n   - Check \"Enable Fraud Protection Advanced\"\n   - Additional fees apply\n   - Navigate to API Webhooks\n   - Edit webhook configured for NetSuite\n   - Check \"Transaction Reviewed\" under Notification\n   - Save\n\n2. **Enable on Payment Processing Profile**\n   - Navigate to Braintree Configuration > Payment Processing Profile\n   - Check \"Enable Fraud Protection Advanced\" checkbox\n   - Save\n\n3. **Configure NetSuite Scripts**\n   - Navigate to Customization > Scripting > Scripts\n   - Filter for \"BT Generate Refund for Fraud Review Deployment\"\n   - Click View\n   - Navigate to Deployments tab\n   - Set Status to \"Scheduled\"\n   - Choose schedule (typically daily)\n   - Add notification email recipients\n   - Save\n\n**Risk Decision Types**:\n- **Approve**: Transaction approved; proceed with fulfillment\n- **Review**: Transaction flagged; manual review required\n- **Decline**: Transaction declined; cannot be reversed by merchant\n\n**Workflow**:\n1. Customer completes transaction\n2. Braintree Fraud Protection Advanced analyzes transaction\n3. Decision sent to NetSuite via webhook\n4. Transaction placed on hold if \"Review\" status\n5. Merchant reviews transaction in Fraud Protection Advanced dashboard\n6. Merchant approves or rejects\n7. If rejected: Scheduled script generates refund automatically\n\n### Common Issues and Resolution\n\n| Issue | Cause | Resolution |\n|---|---|---|\n| Webhook not sending decisions | \"Transaction Reviewed\" not enabled | Enable \"Transaction Reviewed\" notification on webhook |\n| Refund not generated | Scheduled script not deployed | Deploy and schedule BT Generate Refund script |\n| False positives (good transactions flagged) | Fraud rules too aggressive | Review and adjust filters in Fraud Protection Advanced dashboard |\n| Legitimate transactions blocked | AVS/CVV mismatch | Review AVS/CVV rules; consider lowering strictness for certain regions |\n\n---\n\n---\n\n## Next Steps\n\nBased on your **moderate** configuration, here are your recommended next steps:\n\n1. **Review this guide** with your implementation team\n2. **Access Braintree Control Panel** to configure your merchant account\n3. **Install NetSuite SuiteApp** (Bundle ID: 283423)\n4. **Configure Payment Processing Profile** in NetSuite\n5. **Set up ACH** in Braintree Control Panel\n5. **Enable 3D Secure 2.0** for compliance\n6. **Test in Sandbox environment** before going live\n7. **Complete Go-Live checklist** and validation\n\n### Key Resources\n\n- [Braintree Developer Portal](https://developer.paypal.com/braintree/)\n- [NetSuite SuitePayments Documentation](https://docs.oracle.com/en/cloud/saas/netsuite/ns-online-help/chapter_N2988163.html)\n- [Testing & Go-Live Checklist](https://developer.paypal.com/braintree/docs/guides/credit-cards/testing-go-live/)\n\n---\n\n*This implementation guide was generated on 12/10/2025 based on your discovery form responses. For additional support, contact your Braintree account representative.*\n",
  "sections": [
    {
      "id": 1,
      "title": "OVERVIEW OF THE BRAINTREE ECOSYSTEM",
      "tags": [
        "general reference"
      ]
    },
    {
      "id": 2,
      "title": "MAIN SUPPORT DOCUMENTS",
      "tags": [
        "general reference"
      ]
    },
    {
      "id": 3,
      "title": "SEPARATION OF DUTIES AND SUPPORT BOUNDARIES",
      "tags": [
        "general reference"
      ]
    },
    {
      "id": 4,
      "title": "TOKENIZATION AND RE-AUTHORIZATION",
      "tags": [
        "credit_card",
        "paypal",
        "tokenization",
        "reauthorization",
        "feature",
        "moderate"
      ]
    },
    {
      "id": 7,
      "title": "3D SECURE 2.0",
      "tags": [
        "credit_card",
        "3ds_2",
        "feature",
        "moderate",
        "payment_link",
        "payment_request_link"
      ]
    },
    {
      "id": 8,
      "title": "EXTERNAL ECOMMERCE INTEGRATION",
      "tags": [
        "ecommerce",
        "external_checkout",
        "integration",
        "complex"
      ]
    },
    {
      "id": 9,
      "title": "CREDIT CARD PROCESSING",
      "tags": [
        "credit_card",
        "operation",
        "payment_link",
        "payment_request_link",
        "moto",
        "suitcommerce"
      ]
    },
    {
      "id": 10,
      "title": "ACH (AUTOMATED CLEARING HOUSE)",
      "tags": [
        "ach",
        "operation",
        "payment_link",
        "suitcommerce",
        "moderate"
      ]
    },
    {
      "id": 11,
      "title": "PAYPAL AND EXTERNAL CHECKOUT",
      "tags": [
        "paypal",
        "external_checkout",
        "digital_wallet",
        "payment_link",
        "payment_request_link",
        "suitcommerce"
      ]
    },
    {
      "id": 12,
      "title": "DIGITAL WALLETS (GOOGLE PAY, APPLE PAY, VENMO)",
      "tags": [
        "digital_wallet",
        "external_checkout",
        "payment_link",
        "payment_request_link",
        "suitcommerce"
      ]
    },
    {
      "id": 14,
      "title": "RECONCILIATION AND REPORTING",
      "tags": [
        "reconciliation",
        "moderate",
        "complex"
      ]
    },
    {
      "id": 15,
      "title": "FRAUD PROTECTION",
      "tags": [
        "fraud_protection",
        "fraud_advanced",
        "feature"
      ]
    }
  ],
  "complexity": "moderate",
  "tags": [
    "ecommerce",
    "payment_link",
    "credit_card",
    "ach",
    "paypal",
    "digital_wallet",
    "sale",
    "authorization",
    "capture",
    "refund",
    "void",
    "tokenization",
    "vaulting",
    "3ds_2",
    "fraud_protection",
    "ach_network_check",
    "reconciliation"
  ]
}